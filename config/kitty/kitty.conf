include defaults.conf
include env.conf
include navigator.conf
include tab.conf
include map.conf
include scrollback.conf
include mark.conf

map shift+opt+cmd+r load_config_file

# map ctrl+left kitty --session sessions/session
# map opt+cmd+w kitten tab_switcher.py arg1
# map shift+ctrl+opt+- kitten tab_switcher.py arg1
map cmd+enter kitten tab_switcher.py arg1
# map cmd+/ kitten kitty_tester.py

# shell zsh --login --interactive
# bell_on_tab "ðŸ”” "

map f8 show_kitty_env_vars
map f1 toggle_marker text 1 timg
map f6 toggle_marker text 1 timg
map f2 launch --title Output --keep-focus cat

map f5 launch --allow-remote-control kitty +kitten broadcast --match-tab recent:0
map f5 launch kitty +kitten broadcast --match-tab recent:0
map f5 kitten broadcast --match-tab recent:0

map shift+cmd+n launch zsh -c "ean; zsh"
# map shift+alt+h launch lazygit
# map shift+cmd+n launch zsh -c "ktt"
map shift+cmd+- combine : launch --type=window : launch --type=window : launch --type=window : launch --type=window : toggle_layout horizontal
map shift+cmd+w launch --type=tab --cwd ~/src/me/wiki

map ctrl+cmd+l launch lazygit
# map ctrl+p scroll_to_mark prev
# map ctrl+n scroll_to_mark next

mouse_map right press ungrabbed mouse_select_command_output

# paste last command output
# https://github.com/kovidgoyal/kitty/discussions/4477#discussioncomment-2077030
map shift+ctrl+v combine : launch --stdin-source=@last_cmd_output --type=clipboard : paste_from_selection

# edit-in-kitty --type tab --title "Editing My File"
visual_window_select_characters htnsaoeu
map shift+cmd+t focus_visible_window
map shift+cmd+s swap_with_window

# move window to previous tab
map shift+cmd+space detach_window tab-prev

map ctrl+opt+cmd+g copy_to_buffer a
map ctrl+cmd+g paste_from_buffer a
map ctrl+opt+cmd+c copy_to_buffer b
map ctrl+cmd+c paste_from_buffer b
map ctrl+opt+cmd+r copy_to_buffer c
map ctrl+cmd+r paste_from_buffer c
map ctrl+opt+cmd+l copy_to_buffer d
map ctrl+cmd+l paste_from_buffer d

# HINTS Mode
action_alias myhints kitten hints --hints-offset=0 --alphabet htnsueoagcrl

# map f1 myhints --customize-processing custom-hints.py

map cmd+e>cmd+d open_url_with_hints
# insert selected path
# --program - means paste into terminal window
# --program @ means copy to clipboard
# --program * means copy to primary selection (if primary selection supported)
map ctrl+cmd+c myhints --type word --program @ 
map cmd+m myhints --type word --program @ 
map opt+cmd+v myhints --type word --program - 
## HINT PASTE
# regex
# match anything that is not a whitespace char
# https://docs.python.org/3/library/re.html
map cmd+e>w myhints --type regex --regex "\S*" --program - 
# url
map cmd+e>r myhints --type url --program - 
map cmd+e>r>r myhints --type url --program @ 
# path
map cmd+e>cmd+f myhints --type path --program - 
map cmd+e>shift+f myhints --type path --multiple --program - 
map cmd+e>cmd+f>cmd+c myhints --type path --program @ 

map cmd+e>l myhints --type line --program -
map cmd+e>shift+l myhints --type line --multiple --program -
# insert word
map cmd+e>cmd+w myhints --type word --program -
map cmd+e>shift+w myhints --type word --multiple --program -
# insert hash
map cmd+e>cmd+h myhints --type hash --program -
map cmd+e>cmd+h>cmd+c myhints --type hash --program @
map cmd+e>shift+h myhints --type hash --multiple --program -

map cmd+e>cmd+n myhints --type linenum 
# open urls with hyperlinks eg gls --hyperlink=auto
map cmd+e>cmd+g myhints --type hyperlink
# open
map cmd+e>f myhints --type path

# Reset the terminal
# map cmd+l clear_terminal reset active
# Clear the terminal screen by erasing all contents
# map cmd+l clear_terminal clear active
# Clear the terminal scrollback by erasing it
# map cmd+l clear_terminal scrollback active
# Scroll the contents of the screen into the scrollback
# map cmd+l clear_terminal scroll active
# Clear everything up to the line with the cursor
map cmd+l clear_terminal to_cursor active

# map cmd+a>g launch lazygit
# map shift+cmd+g launch sh -c 'zsh && lg'
# map shift+cmd+g launch lazygit

# the splits layout lets you specify whether to create a horizontal or vertical window
enabled_layouts splits, stack, horizontal
# horizontal, stack, vertical
# splits, grid

map cmd+left resize_window narrower 5
map cmd+right resize_window wider 5
map cmd+up resize_window taller 5
map cmd+down resize_window shorter 5
# reset all windows in the tab to default sizes
map cmd+# resize_window reset

map ctrl+cmd+d detach_window


# map shift+ctrl+t launch --type=tab --cwd ~/src/playground --title playground
# map shift+ctrl+p launch kitty-tabber lg
# map shift+ctrl+p launch --type=window lazygit --hold
# map shift+ctrl+s launch --type=os-window --cwd ~/dotfiles
# map shift+ctrl+m launch --type=os-window --cwd ~/src/udemy/schwarz/react
# map shift+ctrl+w launch --type=os-window --cwd ~/src/me/wiki
# map shift+ctrl+v launch --type=os-window --cwd ~/Documents/candy/wiki
# map shift+ctrl+y launch --type=os-window --cwd ~/src/candy/main/referralcandy-main

map cmd+g previous_tab
map cmd+r next_tab
map cmd+t new_tab
# TODO: not sure why alt+cmd+t not working
map ctrl+cmd+t combine : new_tab : previous_tab : close_tab
map alt+cmd+r move_tab_forward
map alt+cmd+g move_tab_backward
map cmd+w close_tab
# close every tab other than wiki or currently focussed tab
# not good enough - it throws an error if no matches are found
map ctrl+cmd+w remote_control close-tab --match "not (title:wiki or state:focused)" 
map ctrl+opt+cmd+w close_other_tabs_in_os_window
map ctrl+shift+e set_tab_title
# tab_title_template "{fmt.fg.red}{bell_symbol}{activity_symbol}{fmt.fg.tab}{index}:{title}}"
# active_tab_title_template "{fmt.fg.red}{bell_symbol}{activity_symbol}{fmt.fg.tab}{index}:{title}:{layout_name[:2]}"
map f8 remote_control set-tab-color inactive_bg=blue inactive_fg=white
map f9 remote_control set-tab-color inactive_bg=red inactive_fg=white

# TODO: toggle os windows
map shift+cmd+1 nth_os_window 1
map shift+cmd+2 nth_os_window 2

map cmd+1 goto_tab 1
map cmd+2 goto_tab 2
map cmd+3 goto_tab 3
map cmd+4 goto_tab 4
map cmd+5 goto_tab 5

map alt+cmd+* goto_tab 1
map alt+cmd+) goto_tab 2

# go to previous active tab
map cmd+space goto_tab 0
map opt+cmd+h goto_tab 1
map opt+cmd+t goto_tab 2
map opt+cmd+n goto_tab 3
map opt+cmd+s goto_tab 4

# map cmd+t new_window
# map cmd+h new_window

# zoom
map cmd+z toggle_layout stack
map opt+cmd+z toggle_layout horizontal
map cmd+n next_layout

# map alt+cmd+n last_used_layout
map cmd+s next_window
# map cmd+s nth_window -1 - toggle selected window
map cmd+h launch --location=vsplit
map ctrl+cmd+h combine : launch --location=vsplit : neighboring_window left : close_window
map cmd+b launch --location=hsplit
map ctrl+cmd+n layout_action rotate
map ctrl+cmd+b combine : launch --location=hsplit : neighboring_window up : close_window

map shift+up move_window up
map shift+left move_window left
map shift+right move_window right
map shift+down move_window down

# only works in horizontal layout?
# map f6 move_window_backward
# map f9 move_window_backward
# map ctrl+cmd+t move_window_to_top

# map f6 detach_window new-tab
map ctrl+f6 detach_window ask
map ctrl+f5 detach_tab ask


map shift+alt+cmd+n new_os_window
map cmd+c close_window
map ctrl+cmd+c close_other_windows_in_tab
